# Allow Python to flush stdout immediately
PYTHONUNBUFFERED=1

COMPOSE_PROJECT_NAME=superset
DEV_MODE=true

# ================================================================
# Postgres server mặc định (container `db`)
# ================================================================
# Đây là user/db để khởi tạo PostgreSQL khi container start lần đầu
# => không trùng với user Superset/Airflow
POSTGRES_USER=db_user
POSTGRES_PASSWORD=db_password
POSTGRES_DB=db

# ================================================================
# Superset database connection (tạo qua superset_init.sql)
# ================================================================
DATABASE_USER=superset
DATABASE_PASSWORD=superset
DATABASE_DB=superset_db
DATABASE_HOST=weather_postgres_db
DATABASE_PORT=5432
DATABASE_DIALECT=postgresql+psycopg2

# ================================================================
# Examples database (tạo qua superset_init.sql)
# ================================================================
EXAMPLES_USER=examples
EXAMPLES_PASSWORD=examples
EXAMPLES_DB=examples_db
EXAMPLES_HOST=weather_postgres_db
EXAMPLES_PORT=5432
# Use PostgreSQL for examples instead of DuckDB
SUPERSET__SQLALCHEMY_EXAMPLES_URI=postgresql+psycopg2://examples:examples@weather_postgres_db:5432/examples_db

# ================================================================
# Airflow database (tạo qua superset_init.sql)
# ================================================================
AIRFLOW_USER=airflow
AIRFLOW_PASSWORD=airflow
AIRFLOW_DB=airflow_db
AIRFLOW_HOST=weather_postgres_db
AIRFLOW_PORT=5432

# ================================================================
# Redis cache
# ================================================================
REDIS_HOST=redis
REDIS_PORT=6379

# ================================================================
# Development and logging
# ================================================================
FLASK_DEBUG=true
SUPERSET_LOG_LEVEL=info

SUPERSET_APP_ROOT="/"
SUPERSET_ENV=development
SUPERSET_LOAD_EXAMPLES=yes
SUPERSET_PORT=8088
MAPBOX_API_KEY=''

# Make sure you set this to a unique secure random value on production
SUPERSET_SECRET_KEY=TEST_NON_DEV_SECRET

# Frontend build/test configs
ENABLE_PLAYWRIGHT=false
PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
BUILD_SUPERSET_FRONTEND_IN_DOCKER=true

# Python path overrides
PYTHONPATH=/app/pythonpath:/app/docker/pythonpath_dev
